#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include "params.h"
#include "rANS/compress.h"

int16_t raw_data[(PARAM_M + PARAM_N)] = {173,-1487,-529,-1692,-1161,1336,1282,-505,820,-151,1127,704,1391,1801,137,1996,-763,528,-867,-262,-548,31,-136,151,-514,401,788,1016,75,-975,121,-1203,-257,90,-1152,-930,-198,550,-443,137,1024,1164,-926,674,989,-694,-602,101,3079,-67,-494,-31,441,-314,-801,373,-503,-148,-686,783,1933,-89,1442,929,-206,-439,-1425,-934,1505,-559,726,-35,1490,219,-393,953,-310,1971,-972,-630,1834,-982,9,-331,1679,1012,12,-508,-202,-1474,223,1020,704,970,320,-1135,-635,1588,666,231,-981,879,357,230,659,719,1683,-1039,1358,1220,444,-360,915,-801,829,1081,-177,723,-823,-1436,450,-1471,1813,765,-102,796,1581,322,407,905,224,-1027,338,547,-1536,-551,411,-139,-457,1284,1830,551,-920,-1415,23,-762,-1028,-948,496,-850,736,308,294,907,526,-98,-712,-1031,-299,-1527,-219,-1240,333,-1499,-52,-740,840,-1056,1583,714,-138,-1056,-852,1336,-851,1190,1552,860,-975,-592,923,-497,-382,1320,-709,-282,-227,19,129,1318,-1028,384,-144,-680,625,1215,-1363,-973,-935,-706,-1029,-1211,666,98,229,255,1150,618,-1089,496,642,-1256,1170,-1787,332,-235,1295,-252,1969,1203,-1303,-2151,615,1886,530,-247,-1260,-2168,-343,562,-394,-1196,-857,81,-394,295,901,-1776,40,146,1916,977,-19,-651,1468,884,67,-753,320,-1540,-114,756,1341,-893,-574,-1100,-632,-1024,-790,611,905,1565,-527,1667,-2560,-842,-219,560,166,941,472,-670,-1224,112,776,-479,1569,-1082,-717,1094,1335,-1753,2238,857,-635,526,1358,225,-662,-1343,-641,-957,-534,-560,-112,735,76,-119,-765,418,-379,-188,-445,-838,-663,40,1587,1113,-106,-327,703,510,32,2296,182,371,1028,1509,308,0,-761,394,1237,932,232,325,-498,315,421,830,-605,-70,1382,1612,-98,243,-739,806,-312,682,-1357,-1313,237,687,-1309,1548,-598,857,-1080,-34,24,658,1136,1437,152,-208,530,898,-437,239,-2517,-695,628,148,-1143,644,62,511,156,604,-1241,-989,514,536,2112,-1277,587,-354,-14,271,1167,-562,-229,-453,1224,542,1990,445,-1190,-170,-1105,571,-749,307,-175,364,2457,-212,2184,-1785,-128,-1482,1935,-576,505,-370,109,2388,-1073,3,-282,-556,1087,-690,1610,-1722,-71,-353,434,792,1894,-493,-1404,500,830,-791,-34,638,1570,413,2023,-2375,-3633,-2369,712,-1008,1256,963,152,492,-993,-609,996,188,-1217,953,-1129,-588,-2527,1037,-260,1981,1375,834,1529,1267,236,3203,1465,1109,651,-252,1946,-434,-685,1732,-1586,-729,-1880,-813,456,1213,858,-2060,-1400,-345,-671,-168,-411,-425,-738,772,-152,-2592,2099,-832,439,-28,-110,-1413,-517,439,-478,-563,1246,-267,-334,985,-2049,27,-90,362,1105,544,82,-304,-1574,462,92,-1273,1133,-484,-1244,-1989,1366,513,-76,-685,1329,-801,255,3455,-837,-779,153,575,417,-673,-497,-1169,-1270,-1842,1423,-591,1101,-1224,108,-524,1492,347,277,-112,-146,471,30,-2591,-3271,-1411,-198,89,-632,-777,-842,62,-1184,-225,571,11,-1747,-564,53,-727,423,-1275,987,-813,-1343,-929,-992,-648,2178,599,-935,752,-1002,898,611,178,516,-1377,-566,1888,1267,-1129,-1539,448,189,-540,-523,-308,297,-1234,1677,871,-136,552,157,522,1188,-540,145,-1247,-919,-454,3183,1042,-288,-439,-1076,-1841,1719,951,1885,-485,2254,-1443,-911,491,-566,425,1157,-633,735,-838,-718,1384,-632,-1434,168,1629,-1084,313,-27,133,727,-25,-157,-131,-428,1401,-1135,2790,-651,-1372,2588,1191,203,304,-1017,-1210,-1993,360,1764,-1082,-116,53,653,-779,920,-860,1618,-511,-1853,-290,820,210,-367,416,-959,-2832,-1986,-1022,1042,-1254,-1409,1995,382,329,702,994,-1018,-744,-236,594,375,-1012,873,1687,972,574,-178,1708,281,-63,-1374,931,1104,-596,1015,-907,509,812,-102,-1051,-2,-2420,82,-1024,943,-755,-661,851,1105,-630,-1865,-438,-887,631,1707,-192,-723,-1500,110,352,-2,1134,-511,-1958,-605,1043,-519,249,110,1549,625,1848,177,-804,1095,1852,1981,-1963,1645,-1156,1671,-749,-819,-1688,379,-821,-1664,924,-462,-231,-2396,645,1487,-43,-29,506,-108,1684,1632,430,1267,-84,-332,780,-328,-1678,-146,-2242,1494,704,37,362,968,3147,1776,1353,148,-1409,-1059,301,845,1864,677,-330,-63,-968,-3408,-451,-373,-1547,818,237,812,978,1252,511,21,226,269,-895,-1459,-1997,-115,1360,60,-1530,870,107,-784,-84,327,-422,-480,-43,377,371,-514,-523,-206,542,1202,-2031,439,2237,-1446,626,61,-672,416,350,-979,-1470,2566,-68,-817,-1273,-2848,-1295,643,38,1267,-1870,-985,1062,459,1097,793,932,311,1004,-1953,-332,1100,-2215,-1202,-387,2383,911,661,-709,-1162,203,720,-75,2747,800,175,461,1664,-359,1028,406,-149,-304,-57,1618,821,6,158,-1403,595,320,-306,848,-1232,-1289,178,-1287,-1023,547,-622,1789,-43,-702,-720,-933,-238,1514,802,1852,353,829,-30,2229,1149,1307,-1840,31,-346,1111,-1889,305,-657,-158,30,224,-237,221,135,1905,-1001,281,-974,-586,164,1415,-266,55,2922,94,-775,-1320,-750,264,-1671,-351,-192,-1427,1239,-200,-767,677,-1366,-1683,-466,1131,-353,1041,696,80,-751,-945,-918,512,956,-522,-76,515,2338,1094,-208,-1921,77,-208,-1848,307,-2873,-330,-2259,1278,-401,214,406,1201,1766,1091,-124,-2271,-665,333,714,-793,1302,2253,496,-928,1849,-800,443,143,-1125,1035,572,381,-2127,-343,763,-3022,267,78,651,-45,-277,-2931,-1641,2035,-495,83,34,959,-467,-436,-858,2039,291,912,156,-24,-839,636,-63,834,-474,-923,-1136,60,504,-282,-801,-1725,719,1537,122,-992,-2032,-370,502,1778,-1253,501,-1744,322,268,-120,297,1262,1117,2023,632,-527,-467,1430,250,188,-95,-1593,530,955,171,-516,-920,370,-66,-1096,-2222,3294,293,309,145,254,244,-406,1939,800,1555,-250,41,-531,1012,591,1746,-800,-600,1624,1224,1365,759,-488,-1139,-490,3161,-771,-91,-40,1526,1449,-1259,1445,-1372,-1036,-507,-891,-616,492,-338,-1273,1242,703,1766,1117,492,-2696,1297,-1156,-328,1536,-932,-539,2178,817,-1153,-1822,-152,-120,-122,-787,503,-1375,-187,-564,1319,638,940,1570,-831,-1700,1458,1679,-617,854,-1061,242,60,-152,2015,999,681,1550,866,-316,-183,724,-1556,267,500,-462,1431,-1777,-848,1047,895,-1096,-253,-1621,1427,-1060,-917,-1018,-2333,1711,1596,-378,232,25,-1057,159,-113,1252,-658,554,950,1875,-867,-1041,-83,-1674,-683,2010,-649,566,304,1172,-1038,1093,1187,-187,2535,1272,-164,1413,154,-412,-767,376,2152,-43,1508,589,772,-823,906,-1032,172,685,-1661,-592,170,-573,1116,-1057,-160,-339,-5,-1280,-939,-2,545,1626,1425,1104,731,566,1707,-3129,-725,-525,1674,-886,325,2652,104,1726,-302,960,685,963,-302,-395,1391,712,-1488,1316,-929,-563,7,396,472,511,520,-216,458,-900,1022,432,949,-90,504,1187,148,2257,1740,1112,299,277,1402,-297,-2297,-1092,701,1253,-106,1144,555,-567,-310,-831,-1306,633,855,507,-390,-84,153,-344,1538,216,-604,1295,-322,-27,-1931,1117,-1781,-2312,-493,32,1830,718,1416,-730,-1370,-288,-247,965,1045,1334,1527,1476,312,371,389,763,-1393,163,-1600,-37,1611,106,31,-1336,1483,562,-592,1216,-13,711,-515,542,-2374,-273,1042,454,720,-231,-1059,-1240,-582,-191,1463,1313,-626,21,-976,37,2,554,-224,-1219,-1113,350,-1305,-2139,566,675,-536,847,-337,-1826,1065,-692,-79,755,-854,363,326,1691,17,-1256,669,463,1343,-1638,-562,-2542,-277,997,68,623,-1398,-959,1125,-1440,-378,179,-867,564,-1851,412,210,1150,-169,-1395,2598,2835,-698,-50,-1160,195,1139,1256,-92,523,-221,840,438,-304,821,-1301,-1721,-1279,1692,17,397,-26,-421,-2840,-733,767,-533,572,-525,-1030,1673,647,-2352,1201,277,-1274,-780,-711,-542,-454,-768,-1695,-4,534,4,76,-917,-1644,-2272,-768,459,1652,429,525,280,992,-1153,-1212,-57,-182,153,154,-101,-1461,-619,557,627,120,17,-1313,-474,-484,-65,-480,-697,-393,1062,-144,154,1230,633,485,-420,910,1505,-773,-1222,1067,484,-42,-1151,221,-2148,-503,-309,297,1096,-1536,452,-654,-1429,-39,871,-770,-325,927,-492,-1086,-1431,-86,721,-605,413,-838,-2077,1350,17,485,927,-414,107,378,1729,-592,-336,-336,596,-1381,572,-870,1477,1786,-350,877,-1689,951,1029,-526,-53,-653,-519,762,-2008,1314,-502,173,2721,1865,-1164,565,1568,248,-473,-1400,-1243,-64,381,631,-972,860,799,835,-401,711,609,1543,373,-1681,-12,412,-640,47,-1956,1618,705,1235,24,2291,};

uint8_t compressed_data[PARAM_COMPRESSED_SIG_BYTES];
int16_t decompressed_data[PARAM_M + PARAM_N];

int main(){
    int compress_sig_result = compress_sig(compressed_data, raw_data);
    if (compress_sig_result != 0) {
        printf("Compression failed with error code: %d\n", compress_sig_result);
        return -1;
    }
    int decompress_sig_result = decompress_sig(decompressed_data, compressed_data);
    if (decompress_sig_result != 0) {
        printf("Decompression failed with error code: %d\n", decompress_sig_result);
        return -1;
    }
    for (int i = 0; i < PARAM_M + PARAM_N; i++) {
        if (raw_data[i] != decompressed_data[i]) {
            printf("Mismatch at index %d: expected %d, got %d\n", i, raw_data[i], decompressed_data[i]);
            return -1;
        }
    }
    printf("Compression and decompression successful, data matches.\n");
    return 0;

}